#!/usr/bin/python2

import sys
from optparse import OptionParser

from light_compositing import light_compositing


def parse_opts():
    usage = "usage: %prog [options] [directory]"
    parser = OptionParser(usage=usage)
    parser.add_option("-c", "--count", dest="count",  default=-1,
                      metavar="COUNT", help="The number of images to use.")
    parser.add_option("-m", "--mask", dest="mask",
                      metavar="MASK", help="The mask that defines the object of interest.")
    parser.add_option("-f", "--fill", dest="fill", default=1,
                      metavar="FILL", help="The weight of the fill light.")
    parser.add_option("-e", "--edge", dest="edge", default=1,
                      metavar="EDGE", help="The weight of the edge light.")
    parser.add_option("-d", "--diffuse", dest="diffuse", default=1,
                      metavar="DIFFUSE", help="The weight of the diffuse color light.")
    parser.add_option("-o", "--output", dest="output", type="string", default="per_object_light.png",
                      metavar="OUTPUT", help="The output file name.")
    parser.add_option("-v", "--verbose", dest="verbose", action="store_true",
                  metavar="VERBOSE", help="Print debug information.")

    (options, arguments) = parser.parse_args()
    return (options, arguments)


def main():
    (options, arguments) = parse_opts()
    if(len(arguments) == 0):
        directory = "."
    else:
        directory = arguments[0]

    light_compositing.object_modifier(directory, options.output, options.mask, options.fill,
    options.edge, options.diffuse, options.count, options.verbose)

main()
